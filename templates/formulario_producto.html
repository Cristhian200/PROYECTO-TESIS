<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Producto</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/inventario.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/formulario_producto.css') }}">

</head>
<body>
    <div class="dashboard">
        <!-- Barra lateral -->
        <aside class="sidebar">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/LOGO LOCAL.jpg') }}" alt="Logo">
                <h2>Zumba Lavandería</h2>
            </div>
            <ul class="nav-links">
                <li><a href="#">🏠 Inicio</a></li>
                <li><a class="active" href="#">📦 Inventario</a></li>
                <li><a href="#">👥 Clientes</a></li>
                <li><a href="#">🧺 Órdenes</a></li>
                <li><a href="#">📈 Reportes</a></li>
                <li><a href="#">⚙️ Configuración</a></li>
                <li><a href="#">🚚 Proveedores</a></li>
            </ul>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
            <header>
                <h1>📝 {{ 'Editar' if producto else 'Agregar' }} Producto</h1>
            </header>

            <section class="form-section">
                <form action="{{ url_for('editar_producto', id=producto[0]) if producto else url_for('nuevo_producto') }}" method="POST">
                    {% if producto %}
                        <input type="hidden" name="id" value="{{ producto[0] }}">
                    {% endif %}

                    <label for="nombre">📦 Nombre del producto:</label>
                    <input type="text" name="nombre" id="nombre" required value="{{ producto[1] if producto else '' }}">

                    <label for="descripcion">📝 Descripción:</label>
                    <textarea name="descripcion" id="descripcion" rows="3" required>{{ producto[2] if producto else '' }}</textarea>

                    <label for="cantidad">📊 Cantidad disponible:</label>
                    <input type="number" name="cantidad" id="cantidad" step="0.01" required value="{{ producto[3] if producto else '' }}">

                    <label for="unidad">⚖️ Unidad de medida:</label>
                    <select name="unidad" id="unidad" required>
                        <option value="">Seleccione una unidad</option>
                        <option value="Galones" {% if producto and producto[4] == 'Galones' %}selected{% endif %}>Galones</option>
                        <option value="Litros" {% if producto and producto[4] == 'Litros' %}selected{% endif %}>Litros</option>
                        <option value="Mililitros" {% if producto and producto[4] == 'Mililitros' %}selected{% endif %}>Mililitros</option>
                    </select>
   
                    <label for="costo">💲 Costo unitario:</label>
                    <input type="number" name="costo" id="costo" step="0.01" min="0" required value="{{ producto[5] if producto else '' }}">

                    <label for="proveedor">🚚 Proveedor:</label>
                    <select name="proveedor" id="proveedor" required>
                        <option value="">Seleccione un proveedor</option>
                        {% for proveedor in proveedores %}
                            <option value="{{ proveedor[0] }}"
                                {% if producto and proveedor[0] == producto[6] %}selected{% endif %}>
                                {{ proveedor[1] }}
                            </option>
                        {% endfor %}
                    </select>

                    <div class="form-buttons">
                        <button type="submit" class="save-button">💾 Guardar</button>
                        <a href="{{ url_for('inventario') }}" class="cancel-button">❌ Cancelar</a>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <script>
        document.querySelector('form').addEventListener('submit', function (e) {
            const cantidad = parseFloat(document.getElementById('cantidad').value);
            const costo = parseFloat(document.getElementById('costo').value);
    
            if (cantidad < 0) {
                alert("❗ La cantidad no puede ser negativa");
                e.preventDefault();
                return;
            }
    
            if (costo < 0) {
                alert("❗ El costo unitario no puede ser negativo 💸");
                e.preventDefault();
            }
        });
    </script>
    


</body>
</html>
